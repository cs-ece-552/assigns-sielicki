          // CS552 2008 student tests
          // Original Authors: Matt Sinclair, Amy Zou, Ju shin Lee
          
          // Author: Amy Zou
          // CS/ECE 552 Spring '08
          // Demo III Test File
          //
          // Filename: amy_TestDemo3.asm
          // This tests dependencies in the aligned pipeline processor and contains 
          // calculated hits and misses for Dcache.
          
          // Dcache misses = 12
          // Dcache hits = 12
          // test dependencies (RAW)
0000 c21e lbi r2, 0x1E
0002 9506 slbi r5, 6
0004 c32a lbi r3, 0x2A
0006 931a slbi r3, 0x1A
0008 da64 add r1,r2,r3
000a d971 sub r4, r1,r3
000c d95b andn r6, r1,r2
000e d9d6 xor r5, r1,r6
          
          // the halt instructions should never execute
0010 3004 jal .lb1           
0012 0000 halt                    
0014 0000 halt
          
          // test dependencies (WAW)
0016      .lb1:
0016 c1ff lbi r1, -1            
0018 ea04 slt r1, r2, r0
001a 3004 jal .lb2 
001c 8000 st r0, r0, 0            
001e 0000 halt 
          
          // tests if it hits the memory
          // 1 miss, 7 hits        
0020      .lb2:
0020 c11e lbi r1, 0x1E
0022 c21f lbi r2, 0x1F
0024 c320 lbi r3, 0x20
0026 c45e lbi r4, 0x5E
0028 c514 lbi r5, 0x14
002a 8520 st r1, r5, 0
002c 8542 st r2, r5, 2
002e 8564 st r3, r5, 4
0030 8586 st r4, r5, 6
0032 8dc0 ld r6, r5, 0
0034 8dc2 ld r6, r5, 2
0036 8dc4 ld r6, r5, 4
0038 8dc6 ld r6, r5, 6 
          
          // these should be a misses
          // 4 misses
003a 8144 st r2, r1, 4
003c 8c40 ld r2, r4, 0
003e 8176 st r3, r1, 0x16
0040 8162 st r3, r1, 0x02
          
          // this should still be a hit
          // 0 misses, 1 hit
0042 8d42 ld r2, r5, 2
          
          // this should miss in both caches then hit in both caches
          // 2 misses, 2 hits
0044 c60c lbi r6, 12
0046 8680 st r4, r6, 0
0048 c508 lbi r5, 0x8
004a 9508 slbi r5, 0x08
          st r4, r5
004c 8e22 ld r1, r6, 2
004e 8542 st r2, r5, 2
          
          // miss both caches because we're writing to the same index but different tags
          // then hit from the last 2 read instructions
          // 5 misses, 2 hits
0050 c11e lbi r1, 0x1E
0052 c21f lbi r2, 0x1F
0054 c320 lbi r3, 0x20
0056 c45e lbi r4, 0x5E
0058 c514 lbi r5, 0x14
005a c608 lbi r6, 8
005c 8620 st r1, r6, 0
005e c608 lbi r6, 0x8
0060 960a slbi r6, 0x0A
0062 8640 st r2, r6, 0
0064 c610 lbi r6, 0x10
0066 9608 slbi r6, 0x08
0068 8660 st r3, r6, 0
006a c614 lbi r6, 0x14
006c 8680 st r4, r6, 0
006e c618 lbi r6, 0x18
0070 9604 slbi r6, 0x04
0072 86a0 st r5, r6, 0
0074 8e20 ld r1, r6, 0
0076 c60e lbi r6, 14
0078 8ea0 ld r5, r6, 0
007a 0000 halt
          
          //this instruction should never execute
007c 86a3 st r5, r6, 3
