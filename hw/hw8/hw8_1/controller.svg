<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1050px" preserveAspectRatio="none" style="width:729px;height:1050px;" version="1.1" viewBox="0 0 729 1050" width="729px" zoomAndPan="magnify"><defs><filter height="300%" id="f1teavgzb8aut2" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FEFECE" filter="url(#f1teavgzb8aut2)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="90" x="139.5" y="8"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="139.5" x2="229.5" y1="37.0679" y2="37.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="149.5" y="27.9659">is mem op</text><ellipse cx="76.5" cy="33" fill="#000000" filter="url(#f1teavgzb8aut2)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f1teavgzb8aut2)" height="120.7885" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="141" x="6" y="178"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="6" x2="147" y1="207.0679" y2="207.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="16" y="197.9659">Do Compare Read</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="45" x="11" y="224.896">comp=1</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="42" x="11" y="241.2401">write=0</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105" x="11" y="257.5842">tag_in=addr[15:11]</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="95" x="11" y="273.9283">index=addr[10:3]</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="90" x="11" y="290.2725">offset=addr[2:0]</text><rect fill="#FEFECE" filter="url(#f1teavgzb8aut2)" height="202.5091" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="143" x="447" y="137"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="447" x2="590" y1="166.0679" y2="166.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="123" x="457" y="156.9659">Do Compare Write</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="45" x="452" y="183.896">comp=1</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="42" x="452" y="200.2401">write=1</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105" x="452" y="216.5842">tag_in=addr[15:11]</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="95" x="452" y="232.9283">index=addr[10:3]</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="90" x="452" y="249.2725">offset=addr[2:0]</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="87" x="452" y="265.6166">data_in=data_in</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105" x="452" y="281.9607">tag_in=addr[15:11]</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="90" x="452" y="298.3048">offset=addr[2:0]</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="455" y="314.6489"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="75" x="452" y="330.993">srcout=cache</text><rect fill="#FEFECE" filter="url(#f1teavgzb8aut2)" height="186.1649" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="205" x="149" y="419"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="149" x2="354" y1="448.0679" y2="448.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="210" y="438.9659">Access Read</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="45" x="154" y="465.896">comp=0</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="42" x="154" y="482.2401">write=0</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="95" x="154" y="498.5842">index=addr[10:3]</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="90" x="154" y="514.9283">offset=addr[2:0]</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="157" y="531.2725"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="168" x="154" y="547.6166">bank.Addr[15:11]=addr[15:11]</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="185" x="154" y="563.9607">bank.Addr[10:3]=cache.index_out</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="177" x="154" y="580.3048">bank.Addr[2:0]=cacheoffset_out</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="157" y="596.6489"/><rect fill="#FEFECE" filter="url(#f1teavgzb8aut2)" height="55.412" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="55" x="439" y="984"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="439" x2="494" y1="1013.0679" y2="1013.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="35" x="449" y="1003.9659">Done</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="35" x="444" y="1030.896">srcout</text><rect fill="#FEFECE" filter="url(#f1teavgzb8aut2)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="140" x="199.5" y="213.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="199.5" x2="339.5" y1="242.5679" y2="242.5679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="120" x="209.5" y="233.4659">compare_rd_done</text><rect fill="#FEFECE" filter="url(#f1teavgzb8aut2)" height="88.1003" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="120" x="406.5" y="468"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="406.5" x2="526.5" y1="497.0679" y2="497.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="416.5" y="487.9659">Evict + Replace</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="59" x="411.5" y="514.896">addr=addr</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="26" x="411.5" y="531.2401">rd=1</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="28" x="411.5" y="547.5842">wr=0</text><rect fill="#FEFECE" filter="url(#f1teavgzb8aut2)" height="55.412" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="95" x="106" y="635"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="106" x2="201" y1="664.0679" y2="664.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="58" x="124.5" y="654.9659">Good Hit</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="75" x="111" y="681.896">srcout=cache</text><rect fill="#FEFECE" filter="url(#f1teavgzb8aut2)" height="202.5091" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="176" x="378.5" y="720"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="378.5" x2="554.5" y1="749.0679" y2="749.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="424" y="739.9659">Access Write</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="45" x="383.5" y="766.896">comp=0</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="42" x="383.5" y="783.2401">write=1</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105" x="383.5" y="799.5842">tag_in=addr[15:11]</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="95" x="383.5" y="815.9283">index=addr[10:3]</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="90" x="383.5" y="832.2725">offset=addr[2:0]</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="55" x="383.5" y="848.6166">valid_in=1</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="156" x="383.5" y="864.9607">data_in=bank.DataOut[15:0]</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="386.5" y="881.3048"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="386.5" y="897.6489"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="69" x="383.5" y="913.993">srcout=bank</text><!--link *start to memop--><path d="M86.8555,33 C97.955,33 116.4025,33 134.2923,33 " fill="none" id="*start-memop" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="139.3167,33,130.3167,29,134.3167,33,130.3167,37,139.3167,33" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="105" y="25.897">clk</text><!--link memop to memop--><path d="M229.7328,21.1055 C248.5495,20.2852 264.5,24.25 264.5,33 C264.5,40.9297 251.4,44.9294 234.9387,44.9991 " fill="none" id="memop-memop" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="229.7328,44.8945,238.6506,49.0745,234.7318,44.9949,238.8113,41.0761,229.7328,44.8945" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="270.5" y="38.397">not a mem op</text><!--link memop to compare_rd--><path d="M171.2571,58.1983 C156.3183,86.6236 131.4301,133.9802 110.9087,173.0278 " fill="none" id="memop-compare_rd" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="108.4287,177.7467,116.1563,171.6407,110.7547,173.3207,109.0747,167.9191,108.4287,177.7467" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="157.5" y="102.897">load op</text><!--link memop to compare_wr--><path d="M226.32,58.0337 C261.2195,78.9854 312.2219,109.7449 356.5,137 C384.6701,154.34 415.4608,173.563 442.5616,190.5746 " fill="none" id="memop-compare_wr" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="446.8784,193.2853,441.3837,185.1117,442.644,190.6263,437.1294,191.8867,446.8784,193.2853" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="306.5" y="102.897">store op</text><!--link compare_wr to acc_read--><path d="M506.8582,340.3401 C500.9384,358.2132 492.2351,375.4105 479.5,389 C450.3802,420.0735 426.7077,400.193 388.5,419 C378.5469,423.8992 368.4815,429.4346 358.5637,435.3031 " fill="none" id="compare_wr-acc_read" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="354.0183,438.0218,363.7954,436.8348,358.3093,435.4552,359.6888,429.9692,354.0183,438.0218" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="493.5" y="384.897">clk, !hit + (!valid &amp; hit)</text><!--link compare_wr to load_done--><path d="M590.1076,305.2423 C606.1462,324.4352 620.9335,346.5706 629.5,370 C632.3998,377.9309 629.9566,380.5679 629.5,389 C616.5922,627.3799 683.7103,712.2859 571.5,923 C555.0432,953.9034 522.9128,978.4752 498.5076,993.8097 " fill="none" id="compare_wr-load_done" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="494.046,996.5649,503.8053,995.2395,498.3002,993.9378,499.6019,988.4327,494.046,996.5649" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="638.5" y="667.897">clk, hit + valid</text><!--link compare_rd to compare_rd_done--><path d="M147.2702,238.5 C162.5418,238.5 178.7409,238.5 194.1793,238.5 " fill="none" id="compare_rd-compare_rd_done" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="199.3833,238.5,190.3833,234.5,194.3833,238.5,190.3833,242.5,199.3833,238.5" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="165.25" y="231.397">clk</text><!--link *start to compare_rd--><path d="M76.5,43.1908 C76.5,66.5548 76.5,125.5965 76.5,172.6928 " fill="none" id="*start-compare_rd" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="76.5,177.7911,80.5,168.7911,76.5,172.7911,72.5,168.7911,76.5,177.7911" style="stroke: #A80036; stroke-width: 1.0;"/><!--link compare_rd_done to put_into_bank--><path d="M280.9911,263.5793 C295.6223,294.3859 322.6165,347.6429 352.5,389 C371.6019,415.4359 395.8146,442.2875 417.008,464.1293 " fill="none" id="compare_rd_done-put_into_bank" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="420.6542,467.8687,417.2348,458.6325,417.1635,464.2889,411.5071,464.2176,420.6542,467.8687" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="353.5" y="384.897">!hit &amp; (!valid + !dirty)</text><!--link compare_rd_done to goodhit--><path d="M245.4339,263.7781 C224.7513,285 193.7256,315.6646 164.5,340 C146.8717,354.6787 132.9967,349.6029 122.5,370 C78.4967,455.5068 116.0068,573.4927 138.9173,629.9041 " fill="none" id="compare_rd_done-goodhit" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="140.9491,634.8409,141.2227,624.9958,139.0461,630.2172,133.8247,628.0406,140.9491,634.8409" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="123.5" y="384.897">valid &amp; hit</text><!--link goodhit to load_done--><path d="M172.6687,690.2441 C207.3509,739.5622 284.0386,844.6647 360.5,923 C383.6735,946.7414 412.7683,970.6763 434.6109,987.6578 " fill="none" id="goodhit-load_done" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="438.6019,990.7461,433.9322,982.0747,434.6476,987.6861,429.0362,988.4015,438.6019,990.7461" style="stroke: #A80036; stroke-width: 1.0;"/><!--link compare_rd_done to acc_read--><path d="M249.6207,263.9115 C231.2167,289.1777 205.1418,329.8612 194.5,370 C190.6773,384.4186 191.2739,399.3438 194.5351,413.8597 " fill="none" id="compare_rd_done-acc_read" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="195.7407,418.7655,197.477,409.0709,194.5473,413.91,189.7082,410.9803,195.7407,418.7655" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="195.5" y="384.897">(valid &amp; dirty &amp; !hit)</text><!--link acc_read to put_into_bank--><path d="M354.2772,512 C370.1428,512 386.1458,512 400.9003,512 " fill="none" id="acc_read-put_into_bank" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="406.2771,512,397.2771,508,401.2771,512,397.2771,516,406.2771,512" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="372.25" y="504.897">clk</text><!--link put_into_bank to acc_write--><path d="M466.5,556.0151 C466.5,597.1612 466.5,660.2406 466.5,714.5891 " fill="none" id="put_into_bank-acc_write" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="466.5,719.8203,470.5,710.8203,466.5,714.8203,462.5,710.8203,466.5,719.8203" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="467.5" y="667.897">clk</text><!--link acc_write to load_done--><path d="M466.5,923.1748 C466.5,943.3092 466.5,963.0419 466.5,978.731 " fill="none" id="acc_write-load_done" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="466.5,983.8914,470.5,974.8914,466.5,978.8914,462.5,974.8914,466.5,983.8914" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml
skinparam state {
	backgroundColor<<MetaState>> Gold
	backgroundColor<<MinorMetaState>> IndianRed
	backgroundColor<<Jump>> Gold
	backgroundColor<<JumpMinor>> IndianRed
	backgroundColor<<JumpClkRes>> Cyan
}

state "is mem op" as memop
[*] -> memop: clk
memop - -> memop: not a mem op
memop -d-> compare_rd: load op
memop -d-> compare_wr: store op

state "Do Compare Read" as compare_rd: comp=1\nwrite=0\ntag_in=addr[15:11]\nindex=addr[10:3]\noffset=addr[2:0]
state "Do Compare Write" as compare_wr: comp=1\nwrite=1\ntag_in=addr[15:11]\nindex=addr[10:3]\noffset=addr[2:0]\ndata_in=data_in\ntag_in=addr[15:11]\noffset=addr[2:0]\n\nsrcout=cache
compare_wr - -> acc_read: clk, !hit + (!valid & hit)
compare_wr - -> load_done     : clk, hit + valid

compare_rd -> compare_rd_done: clk
[*] -> compare_rd
compare_rd_done -d-> put_into_bank: !hit & (!valid + !dirty)

state "Good Hit" as goodhit: srcout=cache
compare_rd_done - -> goodhit: valid & hit
goodhit - -> load_done
compare_rd_done - -> acc_read: (valid & dirty & !hit)
acc_read -> put_into_bank: clk
put_into_bank - -> acc_write: clk
acc_write - -> load_done
state "Access Read" as acc_read: comp=0\nwrite=0\nindex=addr[10:3]\noffset=addr[2:0]\n\nbank.Addr[15:11]=addr[15:11]\nbank.Addr[10:3]=cache.index_out\nbank.Addr[2:0]=cacheoffset_out\n
state "Evict + Replace" as put_into_bank: addr=addr\nrd=1\nwr=0
state "Access Write" as acc_write: comp=0\nwrite=1\ntag_in=addr[15:11]\nindex=addr[10:3]\noffset=addr[2:0]\nvalid_in=1\ndata_in=bank.DataOut[15:0]\n\n\nsrcout=bank
state "Done" as load_done: srcout



@enduml

PlantUML version 1.2019.04(Fri Mar 29 10:44:36 CDT 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_191-b12
Operating System: Linux
OS Version: 5.0.5
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>